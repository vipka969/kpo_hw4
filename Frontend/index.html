<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Gоzон - Интернет-магазин</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.0/font/bootstrap-icons.css">
    <link rel="stylesheet" href="style.css">
</head>
<body>
<nav class="navbar navbar-dark bg-primary">
    <div class="container">
            <span class="navbar-brand mb-0 h1">
                <i class="bi bi-shop"></i> Gоzон - Интернет-магазин
            </span>
        <div class="text-light">
            User ID: <span id="currentUserId">Не выбран</span>
        </div>
    </div>
</nav>

<div class="container mt-4">
    <!-- Шаг 1: Выбор User ID -->
    <div class="card mb-4" id="userIdSection">
        <div class="card-header bg-info text-white">
            <h4><i class="bi bi-person"></i> Шаг 1: Выбор пользователя</h4>
        </div>
        <div class="card-body">
            <div class="row">
                <div class="col-md-6">
                    <label for="userIdInput" class="form-label">Введите User ID:</label>
                    <div class="input-group mb-3">
                        <input type="text" class="form-control" id="userIdInput"
                               placeholder="00000000-0000-0000-0000-000000000000">
                        <button class="btn btn-outline-secondary" onclick="generateUserId()">
                            <i class="bi bi-shuffle"></i> Сгенерировать
                        </button>
                    </div>
                    <button class="btn btn-primary w-100" onclick="setUserId()">
                        <i class="bi bi-check-circle"></i> Использовать этот ID
                    </button>
                </div>
                <div class="col-md-6">
                    <div class="alert alert-info">
                        <h6><i class="bi bi-info-circle"></i> Информация:</h6>
                        <p>Для работы с системой нужен уникальный User ID. Он будет использоваться для создания счета и заказов.</p>
                        <p>Пример ID: <code>7b235e0a-aa65-47ca-9ba2-56859cabe46f</code></p>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Аккаунт -->
    <div class="card mb-4" id="accountSection" style="display: none;">
        <div class="card-header bg-success text-white">
            <h4><i class="bi bi-wallet2"></i> Мой счет</h4>
        </div>
        <div class="card-body">
            <div class="row">
                <div class="col-md-8">
                    <div id="accountInfo">
                        <div class="alert alert-warning">
                            Счет не создан. Нажмите "Создать счет" чтобы начать.
                        </div>
                    </div>
                    <div class="mt-3">
                        <button class="btn btn-success me-2" onclick="createAccount()">
                            <i class="bi bi-plus-circle"></i> Создать счет
                        </button>
                        <button class="btn btn-primary me-2" onclick="loadAccount()">
                            <i class="bi bi-arrow-clockwise"></i> Обновить
                        </button>
                        <button class="btn btn-warning" onclick="depositMoney()">
                            <i class="bi bi-cash-coin"></i> Пополнить счет
                        </button>
                    </div>
                </div>
                <div class="col-md-4">
                    <div class="card">
                        <div class="card-header">
                            <h6>Быстрое пополнение</h6>
                        </div>
                        <div class="card-body">
                            <div class="d-grid gap-2">
                                <button class="btn btn-outline-primary" onclick="quickDeposit(100)">
                                    +100 ₽
                                </button>
                                <button class="btn btn-outline-primary" onclick="quickDeposit(500)">
                                    +500 ₽
                                </button>
                                <button class="btn btn-outline-primary" onclick="quickDeposit(1000)">
                                    +1000 ₽
                                </button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Создание заказа -->
    <div class="card mb-4" id="orderSection" style="display: none;">
        <div class="card-header bg-warning text-dark">
            <h4><i class="bi bi-cart-plus"></i> Создание заказа</h4>
        </div>
        <div class="card-body">
            <div class="row">
                <div class="col-md-6">
                    <div class="mb-3">
                        <label for="orderAmount" class="form-label">Сумма заказа:</label>
                        <input type="number" class="form-control" id="orderAmount"
                               min="1" max="100000" step="0.01" placeholder="150.50">
                    </div>
                    <div class="mb-3">
                        <label for="orderDescription" class="form-label">Описание:</label>
                        <input type="text" class="form-control" id="orderDescription"
                               placeholder="Ноутбук, телефон и т.д.">
                    </div>
                    <button class="btn btn-warning w-100" onclick="createOrder()">
                        <i class="bi bi-bag-check"></i> Создать заказ
                    </button>
                </div>
                <div class="col-md-6">
                    <div class="alert alert-info">
                        <h6><i class="bi bi-lightbulb"></i> Как это работает:</h6>
                        <p>1. Создается заказ с указанной суммой</p>
                        <p>2. Заказ отправляется в Order Service</p>
                        <p>3. Через Kafka запускается процесс оплаты</p>
                        <p>4. Деньги списываются с вашего счета</p>
                        <p>5. Статус заказа обновляется</p>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Список заказов -->
    <div class="card mb-4" id="ordersListSection" style="display: none;">
        <div class="card-header bg-dark text-white">
            <h4><i class="bi bi-list-check"></i> Мои заказы</h4>
        </div>
        <div class="card-body">
            <div id="ordersList">
                <div class="text-center">
                    <p class="text-muted">Загрузка заказов...</p>
                </div>
            </div>
            <div class="mt-3">
                <button class="btn btn-outline-dark" onclick="loadOrders()">
                    <i class="bi bi-arrow-clockwise"></i> Обновить список
                </button>
            </div>
        </div>
    </div>

    <!-- Логи -->
    <div class="card">
        <div class="card-header bg-secondary text-white">
            <h4><i class="bi bi-terminal"></i> Логи операций</h4>
        </div>
        <div class="card-body">
            <div id="logOutput" class="log-output">
                <div class="log-entry">Готов к работе. Выберите User ID для начала.</div>
            </div>
            <button class="btn btn-sm btn-outline-secondary mt-2" onclick="clearLogs()">
                <i class="bi bi-trash"></i> Очистить логи
            </button>
        </div>
    </div>
</div>

<script src="app.js"></script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
</body>
</html>